<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>í™€ì§ ë„ë°• ì‹œë®¬ë ˆì´ì…˜</title>
<style>
  body {
    font-family: "Arial", sans-serif;
    background: linear-gradient(135deg, #2b5876, #4e4376);
    color: white;
    text-align: center;
    padding-top: 50px;
    transition: background 0.5s ease;
  }
  h1 { font-size: 28px; margin-bottom: 10px; }
  #balance { font-size: 24px; margin: 10px; }
  #result { font-size: 20px; margin: 20px; transition: all 0.5s ease; }
  input[type="number"] {
    padding: 10px; border-radius: 5px; border: none; font-size: 16px; width: 150px; text-align: center;
  }
  button {
    padding: 12px 20px;
    margin: 10px;
    font-size: 18px;
    border: none;
    border-radius: 10px;
    background-color: #6a11cb;
    color: white;
    cursor: pointer;
    transition: all 0.3s;
  }
  button:hover { transform: scale(1.1); background-color: #2575fc; }
  .flash {
    animation: flash 0.5s;
  }
  @keyframes flash {
    0% { background: #00ff88; }
    100% { background: linear-gradient(135deg, #2b5876, #4e4376); }
  }
</style>
</head>
<body>
  <h1>ğŸ² í™€ì§ ë„ë°• ì‹œë®¬ë ˆì´ì…˜ ğŸ²</h1>
  <div id="balance">ğŸ’° ë³´ìœ  ê¸ˆì•¡: 500,000ì›</div>
  <div>
    <input type="number" id="bet" placeholder="ë°°íŒ… ê¸ˆì•¡ ì…ë ¥" min="1">
  </div>
  <div>
    <button onclick="playGame('í™€')">í™€</button>
    <button onclick="playGame('ì§')">ì§</button>
  </div>
  <div id="result"></div>
  <div id="probability">í˜„ì¬ ì„±ê³µ í™•ë¥ : 35%</div>

  <!-- íš¨ê³¼ìŒ -->
  <audio id="winSound" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg" preload="auto"></audio>
  <audio id="loseSound" src="https://actions.google.com/sounds/v1/cartoon/boing.ogg" preload="auto"></audio>

  <script>
    let balance = 500000;
    let failCount = 0;
    let winRate = 0.35; // ì´ˆê¸° ì„±ê³µ í™•ë¥  35%

    const balanceDisplay = document.getElementById("balance");
    const resultDisplay = document.getElementById("result");
    const probabilityDisplay = document.getElementById("probability");
    const winSound = document.getElementById("winSound");
    const loseSound = document.getElementById("loseSound");

    function playGame(choice) {
      const bet = Number(document.getElementById("bet").value);

      if (bet <= 0 || isNaN(bet)) {
        alert("ë°°íŒ… ê¸ˆì•¡ì„ ì…ë ¥í•˜ì„¸ìš”!");
        return;
      }

      if (bet > balance * 2) {
        alert("âš ï¸ ë°°íŒ… ê¸ˆì•¡ì€ ë³´ìœ ê¸ˆì˜ 2ë°° ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤!");
        return;
      }

      if (balance <= bet * 3) {
        alert("âš ï¸ ë³´ìœ ê¸ˆì´ ë¶€ì¡±í•˜ì—¬ ë°°íŒ…í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤!");
        return;
      }

      const random = Math.random();
      const outcome = random < winRate ? choice : (choice === 'í™€' ? 'ì§' : 'í™€');
      const isWin = choice === outcome;

      document.body.classList.remove("flash");

      if (isWin) {
        const gain = bet * 2;
        balance += gain;
        resultDisplay.innerHTML = `âœ… ìŠ¹ë¦¬! ${gain.toLocaleString()}ì› íšë“!`;
        winSound.currentTime = 0;
        winSound.play();
        failCount = 0;
        winRate = Math.max(0.25, winRate - 0.02); // ìŠ¹ë¦¬ ì‹œ ì•½ê°„ í™•ë¥  ë‚®ì¶¤
        document.body.classList.add("flash");
      } else {
        const loss = bet * 3;
        balance -= loss;
        resultDisplay.innerHTML = `âŒ íŒ¨ë°°... ${loss.toLocaleString()}ì› ì†ì‹¤`;
        loseSound.currentTime = 0;
        loseSound.play();
        failCount++;
        if (failCount >= 5) {
          winRate = Math.min(0.5, winRate + 0.1); // ì‹¤íŒ¨ 5íšŒ ì‹œ í™•ë¥  ì¦ê°€
          failCount = 0;
        }
      }

      balanceDisplay.innerHTML = `ğŸ’° ë³´ìœ  ê¸ˆì•¡: ${balance.toLocaleString()}ì›`;
      probabilityDisplay.innerHTML = `í˜„ì¬ ì„±ê³µ í™•ë¥ : ${(winRate * 100).toFixed(1)}%`;

      // íŒŒì‚° or ëª©í‘œ ë‹¬ì„± ì‹œ ì´ˆê¸°í™”
      if (balance <= 0) {
        alert("ğŸ’€ íŒŒì‚°í•˜ì…¨ìŠµë‹ˆë‹¤! ë‹¤ì‹œ ì‹œì‘í•©ë‹ˆë‹¤.");
        resetGame();
      } else if (balance >= 5000000) {
        alert("ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤! 5,000,000ì› ë‹¬ì„±! ê²Œì„ì´ ì´ˆê¸°í™”ë©ë‹ˆë‹¤.");
        resetGame();
      }
    }

    function resetGame() {
      balance = 500000;
      failCount = 0;
      winRate = 0.35;
      balanceDisplay.innerHTML = `ğŸ’° ë³´ìœ  ê¸ˆì•¡: ${balance.toLocaleString()}ì›`;
      probabilityDisplay.innerHTML = `í˜„ì¬ ì„±ê³µ í™•ë¥ : ${(winRate * 100).toFixed(1)}%`;
      resultDisplay.innerHTML = "";
      document.body.style.background = "linear-gradient(135deg, #2b5876, #4e4376)";
    }
  </script>
</body>
</html>
