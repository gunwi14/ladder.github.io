<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>홀짝 도박 시뮬레이션</title>
<style>
  body {
    font-family: "Arial", sans-serif;
    background: linear-gradient(135deg, #2b5876, #4e4376);
    color: white;
    text-align: center;
    padding-top: 50px;
    transition: background 0.6s ease;
  }
  h1 { font-size: 28px; margin-bottom: 10px; }
  #balance, #goal { font-size: 22px; margin: 8px; }
  #result { font-size: 20px; margin: 25px; transition: all 0.5s ease; }
  input[type="number"] {
    padding: 10px; border-radius: 5px; border: none; font-size: 16px; width: 150px; text-align: center;
  }
  button {
    padding: 12px 20px;
    margin: 10px;
    font-size: 18px;
    border: none;
    border-radius: 10px;
    background-color: #6a11cb;
    color: white;
    cursor: pointer;
    transition: all 0.3s;
  }
  button:hover { transform: scale(1.1); background-color: #2575fc; }

  /* 승패 시 시각 효과 */
  .win-flash {
    animation: winFlash 0.6s ease;
  }
  .lose-flash {
    animation: loseFlash 0.6s ease;
  }

  @keyframes winFlash {
    0% { background: #00ff99; }
    100% { background: linear-gradient(135deg, #2b5876, #4e4376); }
  }
  @keyframes loseFlash {
    0% { background: #ff3b3b; }
    100% { background: linear-gradient(135deg, #2b5876, #4e4376); }
  }
</style>
</head>
<body>
  <h1>🎲 홀짝 도박 시뮬레이션 🎲</h1>
  <div id="balance">💰 보유 금액: 500,000원</div>
  <div id="goal">🎯 목표 금액: 5,000,000원</div>
  <div>
    <input type="number" id="bet" placeholder="배팅 금액 입력" min="1">
  </div>
  <div>
    <button onclick="playGame('홀')">홀</button>
    <button onclick="playGame('짝')">짝</button>
  </div>
  <div id="result"></div>

  <!-- 효과음 -->
  <audio id="winSound" src="https://actions.google.com/sounds/v1/cartoon/concussive_hit_guitar_boing.ogg" preload="auto"></audio>
  <audio id="loseSound" src="https://actions.google.com/sounds/v1/cartoon/slap.ogg" preload="auto"></audio>

  <script>
    let balance = 500000;
    let failCount = 0;
    let winRate = 0.35; // 초기 성공 확률 35%

    const balanceDisplay = document.getElementById("balance");
    const resultDisplay = document.getElementById("result");
    const winSound = document.getElementById("winSound");
    const loseSound = document.getElementById("loseSound");

    function playGame(choice) {
      const bet = Number(document.getElementById("bet").value);

      if (bet <= 0 || isNaN(bet)) {
        alert("배팅 금액을 입력하세요!");
        return;
      }

      if (bet > balance * 2) {
        alert("⚠️ 배팅 금액은 보유금의 2배 이하여야 합니다!");
        return;
      }

      if (balance <= bet * 2.5) {
        alert("⚠️ 보유금이 부족하여 배팅할 수 없습니다!");
        return;
      }

      const random = Math.random();
      const outcome = random < winRate ? choice : (choice === '홀' ? '짝' : '홀');
      const isWin = choice === outcome;

      document.body.classList.remove("win-flash", "lose-flash");

      if (isWin) {
        const gain = bet * 2;
        balance += gain;
        resultDisplay.innerHTML = `✅ 승리! ${gain.toLocaleString()}원 획득!`;
        winSound.currentTime = 0;
        winSound.play();
        document.body.classList.add("win-flash");
        failCount = 0;
        winRate = Math.max(0.25, winRate - 0.02); // 승리 시 약간 확률 낮춤
      } else {
        const loss = bet * 2.5;
        balance -= loss;
        resultDisplay.innerHTML = `❌ 패배... ${loss.toLocaleString()}원 손실`;
        loseSound.currentTime = 0;
        loseSound.play();
        document.body.classList.add("lose-flash");
        failCount++;
        if (failCount >= 5) {
          winRate = Math.min(0.5, winRate + 0.1); // 실패 5회 시 확률 증가
          failCount = 0;
        }
      }

      balanceDisplay.innerHTML = `💰 보유 금액: ${balance.toLocaleString()}원`;

      // 파산 or 목표 달성 시 초기화
      if (balance <= 0) {
        alert("💀 파산하셨습니다! 다시 시작합니다.");
        resetGame();
      } else if (balance >= 5000000) {
        alert("🎉 축하합니다! 5,000,000원 달성! 게임이 초기화됩니다.");
        resetGame();
      }
    }

    function resetGame() {
      balance = 500000;
      failCount = 0;
      winRate = 0.35;
      balanceDisplay.innerHTML = `💰 보유 금액: ${balance.toLocaleString()}원`;
      resultDisplay.innerHTML = "";
      document.body.style.background = "linear-gradient(135deg, #2b5876, #4e4376)";
    }
  </script>
</body>
</html>
